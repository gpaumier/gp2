@use 'typography';


article.custom-wikimedia {

  header {
     display: grid;
     grid-template-columns: 1fr 4fr 5fr;
     grid-template-rows: 1fr 5fr 6fr min-content;
     height: 100vh;

     img {
       grid-column: 1/5;
       grid-row: 1/4;
       width: 100%;
       height: 100%;
       object-fit: cover;
       z-index: 25;
     }

    .caption {
       grid-column: 2/5;
       grid-row: 4/5;
       display:block;
       text-align: right;
       align-self: start;
       margin-bottom: 0;
       font-size: .7rem;
       z-index: 50;
     }

     .post-subtitle {
       grid-column: 2/3;
       grid-row: 2/3;
       z-index: 50;
       display:block;
       align-self: center;
       background-color: rgba(228, 83, 31, 0.78);
       color: #f3f3f3;
       padding: .5rem;
       font-size: calc(2rem + 2vw);
       line-height: calc(2rem + 2vw);
     }

  }


  .entry-content .lead-figure,
  h1.entry-title {
     // The lead figure has been extracted and displayed in the header already.
     // Also we don't need the page's title.
     display: none;
 }

  #the-stakes-of-knowledge {

    @media screen and (min-width: 180ch) and (min-height: 50rem) {
      display: grid;
      height: 95vh;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: 5fr 5fr 2fr min-content;

      .figure {
        grid-column: 1/4;
        grid-row: 1/4;

        img {
          height: 100%;
          width: 100%;
          object-fit: cover;
          z-index: 25;
        }

        .caption{
          text-align: right;
        }
      }

      h2 {
        grid-column: 1/2;
        grid-row: 2/3;
        color: #f3f3f3;
        font-size: 3rem;
        align-self: end;
        text-align: left;
        margin-left: 2rem;
        z-index: 50;
      }

      .stakes-writeout {
        grid-column: 3/4;
        grid-row: 1/4;
        column-count: 2;
        column-width: 20ch;
        z-index: 50;
        color: #f3f3f3;
        background-color: #332d2f44;
        padding: .2rem;
        align-self: center;

        p {
          line-height: 1.3rem;
          text-indent: 1rem;
          margin: 0;
        }

        a, a:hover, a:visited {
          color: #f3f3f3;
          font-weight: bold;

        }

        p:first-child {
          text-indent: 0;
        }

        p:last-child {
          //"Continue reading"
          text-indent: 0;
          margin-top: 1rem;
          font-family: $fumseck-sans;
        }
      }

    }
  }

  .wikimedia-vision {
    height: 90vh;
    overflow: hidden;
    background-color: #000099;
    display: grid;
    grid-template-columns: minmax(0, 3fr) 4fr 1fr;
    grid-template-rows: minmax(0, 3fr) 4fr 1fr;

    p:first-child {
      font-size: calc(.5rem + .5vw);
      line-height: calc(.7rem + .5vw);
      color: #b3b3ff;
      grid-column: 1/4;
      grid-row: 1/3;
    }

    p:nth-child(2) {
      display: block;
      padding: .7rem;
      background-color: #00004d99;
      font-size: calc(1.5rem + 1.5vw);
      line-height: calc(1.5rem + 1.5vw);
      color: #f3f3f3;
      grid-column: 2/3;
      grid-row: 2/3;
      align-self: center;
    }
  }

  // Wikimedia photos slideshow / grid

  #wikimedia-photos {
    display:grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(3, auto);

    img {

      @include breakpoint(small only) {
        opacity: 0;
        @include slideshow-fade($num:5, $fade:2, $visible:0);
        grid-column: 1 / span 5;
        grid-row: 1 / 2;
      }

      @include breakpoint(medium) {
        // TODO Do something more interesting with the layout since we have more space
        opacity: 0;
        @include slideshow-fade($num:5, $fade:2, $visible:0);
        grid-column: 1 / span 5;
        grid-row: 1 / 2;
      }
    }
  }


}
